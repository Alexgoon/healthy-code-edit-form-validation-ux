<UserControl x:Class="EditFormValidationDx.Views.EditFormView"
             xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
             xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
             xmlns:dxlc="http://schemas.devexpress.com/winfx/2008/xaml/layoutcontrol"
             xmlns:dxe="http://schemas.devexpress.com/winfx/2008/xaml/editors"
             xmlns:mvvm="http://schemas.devexpress.com/winfx/2008/xaml/mvvm"
             xmlns:dxr="http://schemas.devexpress.com/winfx/2008/xaml/ribbon"
             xmlns:dxb="http://schemas.devexpress.com/winfx/2008/xaml/bars"
             xmlns:dx="http://schemas.devexpress.com/winfx/2008/xaml/core"
             xmlns:in="clr-namespace:EditFormValidationDx.Infrastructure"
             xmlns:vm="clr-namespace:EditFormValidationDx.ViewModels"
             xmlns:model="clr-namespace:EditFormValidationDx.Model"
             xmlns:sys="clr-namespace:System;assembly=mscorlib"
             mc:Ignorable="d"
             d:DesignHeight="450"
             d:DesignWidth="800">
    <UserControl.DataContext>
        <vm:EditFormViewModelDX />
    </UserControl.DataContext>
    <UserControl.Resources>
        <mvvm:BooleanToVisibilityConverter x:Key="booleanToVisibility" />
        <Style TargetType="dxlc:GroupBox">
            <Setter Property="BorderThickness"
                    Value="0" />
            <Setter Property="Background"
                    Value="Transparent" />
            <Setter Property="Padding"
                    Value="0,10" />
            <Setter Property="TitleBackground"
                    Value="Transparent" />
        </Style>
        <Style TargetType="dxlc:LayoutItem">
            <Setter Property="Padding"
                    Value="8,0,0,0" />
            <Setter Property="LabelHorizontalAlignment"
                    Value="Left" />
            <Setter Property="LabelPosition"
                    Value="Left" />
            <Setter Property="AddColonToLabel"
                    Value="True" />
        </Style>
    </UserControl.Resources>
    <Grid>
        <dx:DXImage Source="/Resources/Images/logo.svg"
                    VerticalAlignment="Center"
                    HorizontalAlignment="Stretch"
                    Stretch="Fill"
                    Opacity="0.05"
                    Grid.Row="1" />
        <Border Style="{StaticResource roundPanelBorder}"
                Background="#FFF9F9F9"
                VerticalAlignment="Center"
                HorizontalAlignment="Center"
                Width="450">
            <dxlc:LayoutControl Orientation="Vertical"
                                Margin="8,12"
                                AnimateScrolling="False"
                                DragScrolling="False"
                                Background="Transparent"
                                ItemSpace="30">
                <dxlc:LayoutGroup Orientation="Horizontal">
                    <dxlc:LayoutGroup Orientation="Vertical">
                        <dxlc:LayoutItem Label="First Name">
                            <dxe:TextEdit />
                        </dxlc:LayoutItem>
                        <dxlc:LayoutItem Label="Last Name">
                            <dxe:TextEdit />
                        </dxlc:LayoutItem>
                        <dxlc:LayoutItem Label="Birth Date">
                            <StackPanel>
                                <TextBlock Text="Can't be null"
                                           Foreground="#FFCC0000"
                                           Margin="2"
                                           Visibility="{Binding ElementName=editor, Path=HasValidationError, Converter={StaticResource booleanToVisibility}}" />
                                <dxe:DateEdit Mask="MM/dd/yyyy"
                                              x:Name="editor"
                                              MaskType="DateTimeAdvancingCaret"
                                              MaskUseAsDisplayFormat="True"
                                              DefaultDateTime="01/01/1990"
                                              MaxValue="{x:Static sys:DateTime.Now}"
                                              NullText="MM/DD/YYYY"
                                              ShowNullTextIfFocused="True"
                                              Validate="DateEdit_Validate" 
                                              CausesValidation="False"
                                              InvalidValueBehavior="AllowLeaveEditor"
                                              IsKeyboardFocusWithinChanged="editor_IsKeyboardFocusWithinChanged"
                                              LostFocus="editor_LostFocus"/>
                            </StackPanel>
                        </dxlc:LayoutItem>
                        <dxlc:LayoutItem Label="Job Title">
                            <dxe:TextEdit />
                        </dxlc:LayoutItem>
                        <dxlc:LayoutItem Label="Prefix"
                                         HorizontalAlignment="Right">
                            <dxe:ComboBoxEdit IsTextEditable="False"
                                              ApplyItemTemplateToSelectedItem="True"
                                              Width="90">
                                <mvvm:Interaction.Behaviors>
                                    <mvvm:EnumItemsSourceBehavior ImageSize="16,16" />
                                </mvvm:Interaction.Behaviors>
                            </dxe:ComboBoxEdit>
                        </dxlc:LayoutItem>
                    </dxlc:LayoutGroup>
                    <dxlc:LayoutItem HorizontalAlignment="Right"
                                     VerticalAlignment="Top">
                        <dxe:ImageEdit Width="140"
                                       Height="140" />
                    </dxlc:LayoutItem>
                </dxlc:LayoutGroup>
                <dxlc:LayoutGroup Header="Contact Info"
                                  View="GroupBox"
                                  Orientation="Vertical">
                    <dxlc:LayoutItem Label="Country">
                        <dxe:ComboBoxEdit ItemsSource="{Binding Countries}"
                                          IncrementalFiltering="True"
                                          AutoComplete="True"
                                          ImmediatePopup="True" />
                    </dxlc:LayoutItem>
                    <dxlc:LayoutItem Label="Address">
                        <dxe:TextEdit NullText="e.g. 123 Main St"
                                      ShowNullTextIfFocused="True"
                                      AcceptsReturn="True"
                                      Height="72"
                                      VerticalContentAlignment="Top" />
                    </dxlc:LayoutItem>
                    <dxlc:LayoutItem Label="City"
                                     HorizontalAlignment="Stretch">
                        <dxe:TextEdit />
                    </dxlc:LayoutItem>
                    <dxlc:LayoutGroup Orientation="Horizontal"
                                      ItemSpace="16">
                        <dxlc:LayoutItem Label="State">
                            <dxe:TextEdit />
                        </dxlc:LayoutItem>
                        <dxlc:LayoutItem Label="Zip Code"
                                         HorizontalAlignment="Right">
                            <dxe:TextEdit Width="70" />
                        </dxlc:LayoutItem>
                    </dxlc:LayoutGroup>
                </dxlc:LayoutGroup>
                <dxlc:LayoutGroup Orientation="Vertical">
                    <dxlc:LayoutItem Label="Email">
                        <dxe:TextEdit MaskType="RegEx"
                                      Mask="(\w|[\.\-])+@(\w|[\-]+\.)*(\w|[\-]){2,63}\.[a-zA-Z]{2,4}"
                                      MaskUseAsDisplayFormat="True" />
                    </dxlc:LayoutItem>
                    <dxlc:LayoutItem Label="Phone">
                        <dxe:TextEdit NullText="(000) 000-0000"
                                      MaskType="Simple"
                                      Mask="(999) 000-0000"
                                      MaskUseAsDisplayFormat="True" />
                    </dxlc:LayoutItem>
                </dxlc:LayoutGroup>
                <dx:SimpleButton Content="Save"
                                 Command="{Binding SaveCommand}"
                                 Style="{StaticResource accentButton}"
                                 AsyncDisplayMode="Wait"
                                 HorizontalAlignment="Right"
                                 Width="134" />
            </dxlc:LayoutControl>
        </Border>
    </Grid>
</UserControl>
